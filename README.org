WIP

NOTE: All keybinding of this config is set for Dvorak keyboard layout.

** Require
Clone this repo:
#+begin_src sh
git clone https://github.com/404cn/dotfiles.git ~/.setup
#+end_src

Install nix for Non-NixOS Linux:
#+begin_src sh
sh <(curl -L https://nixos.org/nix/install) --daemon
#+end_src

Install nix for MacOS:
#+begin_src sh
sh <(curl -L https://nixos.org/nix/install)
#+end_src

** TODO NixOS

#+begin_src sh
nixos-rebuild switch --flake .#<host>
#+end_src

** MacOS

Install =homebrew=:
#+begin_src sh
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
#+end_src

For the first time:
#+begin_src sh
mkdir -p ~/.config/nix
echo "experimental-features = nix-command flakes" >> ~/.config/nix/nix.conf
nix-env -iA nixpkgs.git
cd ~/.setup
nix build .#darwinConfigurations.<host>.system
./result/sw/bin/darwin-rebuild switch --flake .#<host>
#+end_src

Then use ~darwin-rebuild~ to rebuild and activate:
#+begin_src sh
darwin-rebuild switch --flake .#<host>
#+end_src

** Non-NixOS Linux

For first time:
#+begin_src sh
nix-env -iA nixpkgs.git
cd ~/.setup
nix build --extra-experimental-features 'nix-command flakes' .#homeConfigurations.<host>.activationPackage
./result/activate
#+end_src

Then use ~home-manager~ to rebuild and activate:
#+begin_src sh
home-manager switch --flake .#<host>
#+end_src

** Tips

*** Enable color for pacman

Uncomment =Color= in =/etc/pacman.conf=.

*** No audio on thinkpad x1carbon

#+begin_src sh
sudo pacman -S fwupd sof-firmware
#+end_src
