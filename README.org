WIP

NOTE: All keybinding of this config is set for Dvorak keyboard layout.

* Prerequire
Clone this repo:
#+begin_src sh
git clone https://github.com/404cn/dotfiles.git ~/.setup
#+end_src

Install nix, ses https://nixos.org/download.html#nix-install-linux.

Linux:
#+begin_src sh
sh <(curl -L https://nixos.org/nix/install) --daemon
#+end_src

MacOS:
#+begin_src sh
sh <(curl -L https://nixos.org/nix/install)
#+end_src

* NixOS
#+begin_src sh
nixos-rebuild switch --flake .#<host>
#+end_src

* Darwin
For first time:
#+begin_src sh
mkdir ~/.config/nix
echo "experimental-features = nix-command flakes" >> ~/.config/nix/nix.conf
nix build .#darwinConfigurations.<host>.system
./result/sw/bin/darwin-rebuild switch --flake .#<host>
#+end_src

#+begin_src sh
darwin-rebuild switch --flake .#<host>
#+end_src

* Non-Nixos
Only use nix to config cli tools.
Some gui app need opengl driver support like firefox and wezterm, use package manager install these apps.

For first time:
#+begin_src sh
nix build --extra-experimental-features 'nix-command flakes' .#homeConfigurations.<host>.activationPackage
./result/activate
#+end_src

#+begin_src sh
home-manager switch --flake .#<host>
#+end_src

* Tips

** Archlinux

*** Enable color

Uncomment =Color= in =/etc/pacman.conf=.

*** No audio on thinkpad x1carbon

#+begin_src sh
sudo pacman -S fwupd sof-firmware
#+end_src
